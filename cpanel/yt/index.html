<!doctype html>


    
    
    




<input type="text" id="searchQuery" placeholder="Enter your search query" />
<button id="searchButton">Search</button>
<select id="songList"></select>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const searchButton = document.getElementById('searchButton');
        const songList = document.getElementById('songList');

        // Event listener for the search button
        searchButton.addEventListener('click', function () {
            const searchQuery = document.getElementById('searchQuery').value;
            fetchSongs(searchQuery);
        });

        // Function to fetch songs from YouTube Data API
        async function fetchSongs(query) {
            const apiKey = 'AIzaSyBemcQ7KH8CvxN0kKjGK-nhfuBzzTy4KEk';
            const maxResults = 40; // Number of results to fetch

            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?key=${apiKey}&part=snippet&type=video&q=${query}&maxResults=${maxResults}&videoLicense=creativeCommon`);
                const data = await response.json();
                songList.innerHTML = ''; // Clear previous results
                data.items.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.id.videoId;
                    option.text = item.snippet.title;
                    songList.appendChild(option);
                });
            } catch (error) {
                console.error('Error fetching songs:', error);
            }
        }

        // Event listener for selecting a song
        songList.addEventListener('change', function () {
            const selectedSongId = this.value;
            const selectedSongUrl = `https://vivekfy.vercel.app/audio?url=https://youtu.be/${selectedSongId}`;

            // Update URL in index page
            updateUrl(selectedSongUrl);
        });

        // Function to update URL in index page
        function updateUrl(url) {
            const backendUrl = 'https://iframe-4eka.onrender.com';
            fetch(`${backendUrl}/update-url`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ url })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.status);
            })
            .catch(error => {
                console.error('Error updating the URL:', error);
            });
        }
    });
</script>


</!doctype>
